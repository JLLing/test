<!DOCTYPE html>
<html lang='en'>
<head>
<title>主要剧情</title>
<!-- for-mobile-apps -->
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta http-equiv='Content-Type' content='text/html; charset=utf-8' />
<meta name='keywords' content='' />
<script type='application/x-javascript'> addEventListener('load', function() { setTimeout(hideURLbar, 0); }, false);
		function hideURLbar(){ window.scrollTo(0,1); } </script>
<!-- //for-mobile-apps -->
<link href='../css/bootstrap.css' rel='stylesheet' type='text/css' media='all' />
<!-- pop-up -->
<link href='../css/popuo-box.css' rel='stylesheet' type='text/css' media='all' />
<!-- //pop-up -->
<link rel='stylesheet' type='text/css' href='../css/zoomslider.css' />
<link rel='stylesheet' type='text/css' href='../css/style.css' />
<link href='../css/font-awesome.css' rel='stylesheet'> 
<script type='text/javascript' src='../js/modernizr-2.6.2.min.js'></script>
<!--/web-fonts-->
<link href='http://fonts.googleapis.com/css?family=Tangerine:400,700' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i' rel='stylesheet'>
<link href='http://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
  <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge, chrome=1'>
    <meta name='renderer' content='webkit'>
    <meta name='viewport' content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no'>
    <meta name='alexaVerifyID' content='LkzCRJ7rPEUwt6fVey2vhxiw1vQ'>
    <meta name='apple-itunes-app' content='app-id=958101793, app-argument='>
	  <meta name='msapplication-TileColor' content='#009a61'>
	  <script type='text/javascript' src='update_data.js'></script>
	  <link rel='stylesheet' type='text/css' href='global.css' />
<!--//web-fonts-->

<link rel='stylesheet' type='text/css' href='txt.css' />

<body ../images/bg/bgcolor='#fff'>

<div id='demo-1' class='banner-inner'>
		<!--/header-w3l-->
			 <div class='header-w3-agileits' id='home'>
			     <div class='inner-header-agile'>	
								<nav class='navbar navbar-default'>
									<div class='navbar-header'>
										
										<h1><a  href='../index.html'><span>文</span>案整理  <p class='s-log'>Miracle Nikki</p></a>
										 
										</h1>
									</div>
									<!-- navbar-header -->

									<div class='clearfix'> </div>	
								</nav>
									<div class='w3ls_search'>
													<div class='cd-main-header'>
														<ul class='cd-header-buttons'>
															<li><a class='cd-search-trigger' href='#cd-search'> <span></span></a></li>
														</ul> <!-- cd-header-buttons -->
													</div>
													<div id='cd-search' class='cd-search'>
														<form action='#' method='post'>
															<input name='Search' type='search' placeholder='Search...'>
														</form>
													</div>
												</div>
					
							</div> 
			
		<!--//header-w3l-->
			<!--/banner-info-->
			<!--/banner-ingo-->
			
		</div>
		 </div>
  <!--/banner-section-->
 <!--//main-header-->
	    
	
						<!-- breadcrumb -->
	<div class='w3_breadcrumb'>
	<div class='breadcrumb-inner'>	
			<ul>
				<li><a href='../index.html'>主页</a><i>//</i></li>

				<li>主要剧情</li>
			</ul>
		</div>
	</div>
		<div id="main">
			<!--<div id='chapter'><div class='block'><img width='100%'src='../images/chapter/c01.jpg'></div><div class='block'><img width='100%' src='../images/chapter/c02.jpg'></div><div class='block'><img width='100%' src='../images/chapter/c03.jpg'></div><div class='block'><img width='100%' src='../images/chapter/c04.jpg'></div></div>

			<div id='jump1'class='block'><img id='lastchapter'class='gray'src='../images/lastchapter.png'><img id='choosechapter'class='normal'src='../images/choosechapter.png'><img id='nextchapter'class='normal'src='../images/nextchapter.png'></div>-->
			<!--<div id="choosseTask" class='block' onclick="expand()"><div id="chapterName"></div><div id="taskName"></div></div>
			<div id="text" ></div>-->
			<!--<div id='jump2'class='block'><span id='clicknextT'onclick=funNull()><img id='lasttask'class='normal'src='../images/lasttask.png'></span><span id='clicknextT'onclick=funNull()><img id='choosetask'class='normal'src='../images/choosetask.png'></span><span id='clicknextT'onclick=funNull()><img id='nexttask'class='normal'src='../images/nexttask.png'></span></div>-->
			
			
			
		</div>	
		
			<!--//content-inner-section-->
 <!-- Footer -->
	<div class='w3l-footer'>
		<div class='container'>
         <div class='footer-info-agile'>
<li><font size='4em'>Connect with us</font><br>Email : <a class='mail' href='mailto:mail@example.com'>info(at)example.com</a><br>
新浪微博 : @奇迹暖暖文案整理组</li>



	   </div>
     </div>

		
			<div class='w3agile_footer_copy'>
				    <p>Copyright &copy; 2017.奇迹暖暖文案整理组 All rights reserved.</p>
			</div>
		<a href='#home' id='toTop' class='scroll' style='display: block;'> <span id='toTopHover' style='opacity: 1;'> </span></a>
		

		
	<script type='text/javascript' src='../data/juqing_data.js'></script>
	<script type='text/javascript' src='../data/task_data.js'></script>
	<script type='text/javascript' src='../data/chapter_data.js'></script>
	<script>
var clickflag=1;
var scale=1;
var chapterName = "";
var chapterNum = 0;
var chooseBool=0;
var chooseString="";
initChapter();
function initChapter(){
	var strChapter = "<div id='chapter'>";
	
	for(var i=0; i<chapter.length;i++){
		if(chapter[i].id[1]=='M'){
			strChapter += "<div class='block' onclick=initTask('" + i + "')><img width='100%'src='../images/chapter/"+ chapter[i].id +".jpg'></div>";
		}
	}
	strChapter += "</div>";
	document.getElementById("main").innerHTML = strChapter;
	
}

function initTask(num){
	num=parseInt(num);
	chapterNum=num;
	//alert(chapterNum);
	chapterName = chapter[chapterNum].name;
	var i=0;
	//alert(chapter[num].id);
	for(;i<task.length;i++){
		if(task[i].id==chapter[chapterNum].id+"01"){
			//alert(task[0].id.substring(0,4));
			taskName = toTaskNum(task[i].id) + " " + task[i].name;
			break;
		}
	}
	
	//alert(chapter[chapterNum].id+","+task[236].id.substring(0,6));
	chooseString="<div class='task'>";
	for(var j=i;j<task.length;j++){

		if(task[j].id.substring(0,6)!=chapter[chapterNum].id) break;
		//alert(task[j].id);
		chooseString+="<span class='task' onclick='initDialog(" + chapterNum + "," + (j-i) + ",2)'>"+toTaskNum(task[j].id)+"</span>";
				
	}
		chooseString += "</div>";
		
		

	document.getElementById("main").innerHTML ="<div id='jump1'class='block'><span id='clicklastC'onclick=funNull()><img id='lastchapter'class='normal'src='../images/lastchapter.png'></span><span id='clickchoose'onclick=initChapter()><img id='choosechapter'class='normal'src='../images/choosechapter.png'></span><span id='clicknextC'onclick=funNull()><img id='nextchapter'class='normal'src='../images/nextchapter.png'></span></div><div id='choosseTask'class='block'onclick='expand()'><div id='chapterName'></div><div id='taskName'></div></div><div id='text'></div><div id='jump2'class='block'><span id='clicklastT'onclick=funNull()><img id='lasttask'class='normal'src='../images/lasttask.png'></span><span id='clickchooseT'onclick=expand()><img id='choosetask'class='normal'src='../images/choosetask.png'></span><span id='clicknextT'onclick=funNull()><img id='nexttask'class='normal'src='../images/nexttask.png'></span></div>";
	//alert(num);
	if(chapterNum==18){
		document.getElementById("lastchapter").className="gray";
		document.getElementById("nextchapter").className="normal";
		document.getElementById("clicklastC").onclick= function(){""};
		document.getElementById("clicknextC").onclick= function(){initTask(chapterNum+1);};
		
	}
	else if(chapterNum>=43){
		
		document.getElementById("lastchapter").className="normal";
		document.getElementById("nextchapter").className="gray";
		document.getElementById("clicklastC").onclick= function(){initTask(chapterNum-1);};
		document.getElementById("clicknextC").onclick= function(){""};
	}
	else{
		document.getElementById("lastchapter").className="normal";
		document.getElementById("nextchapter").className="normal";
		document.getElementById("clicklastC").onclick= function(){initTask(chapterNum-1);};
		document.getElementById("clicknextC").onclick= function(){initTask(chapterNum+1);};
		
	}
	
	
	document.getElementById("chapterName").innerHTML = chapterName;
	document.getElementById("taskName").innerHTML = taskName;
	initDialog(i,0,1);
	
}
function last(num){alert(num);}
function funNull(){}
function expand(){
	if(clickflag==1){
		//document.getElementById("choosseTask").innerHTML = "关卡1";
		if(document.body.offsetWidth<960){
			scale=document.body.offsetWidth/960;
		}
		else{
			scale=1;
		}
		document.getElementById("choosseTask").style.height=400*scale + "px";
		document.getElementById("choosseTask").style.backgroundImage="url('../images/bg/taskchoose.png')";
		document.getElementById("choosseTask").innerHTML=chooseString;
		clickflag--;
	}
	else{
		//document.getElementById("choosseTask").innerHTML = "展开关卡";
		if(document.body.offsetWidth<960){
			scale=document.body.offsetWidth/960;
		}
		else{
			scale=1;
		}
		document.getElementById("choosseTask").style.height=200*scale + "px";
		document.getElementById("choosseTask").style.backgroundImage="url('../images/bg/taskname.png')";
		document.getElementById("choosseTask").innerHTML="<div id='chapterName'></div><div id='taskName'></div></div>";
		document.getElementById("chapterName").innerHTML = chapterName;
		document.getElementById("taskName").innerHTML = taskName;
		clickflag++;
	}
	document.body.scrollTop = document.documentElement.scrollTop = 0;
}


	function initexpand(){
			if(document.body.offsetWidth<960){
				scale=document.body.offsetWidth/960;
			}
			else{
				scale=1;
			}
			document.getElementById("choosseTask").style.height=200*scale + "px";
			document.getElementById("choosseTask").style.backgroundImage="url('../images/bg/taskname.png')";
			document.getElementById("choosseTask").innerHTML="<div id='chapterName'></div><div id='taskName'></div></div>";
			document.getElementById("chapterName").innerHTML = chapterName;
			document.getElementById("taskName").innerHTML = taskName;

	}
initexpand();

	
	</script>	
	<script>
	function initDialog(chapnum,tasknum,type){
		
		initexpand();
		//alert(parseInt(beginId.substring(4,2)));

		
			for(var k=0;k<task.length;k++){

				if(task[k].id.substring(0,6)==chapter[chapterNum].id){
					chapnum=k;
					
					break;
				}
				
			}
	


		tasknum=parseInt(tasknum);
		beginId=task[chapnum+tasknum].id;
		
		taskName = toTaskNum(task[chapnum+tasknum].id) + " " + task[chapnum+tasknum].name;

		if(type==1){
			document.getElementById("taskName").innerHTML = taskName;

		}

		
		var txt = "";
		
		var i=0;
		
		//alert(txt);
		for(; i<juqing.length;i++){
		
			if(juqing[i].id == beginId +"01") break;
			//alert(juqing[i].id +","+ beginId +"01");
		}
		
		//alert(beginId);
		
		for(; i<juqing.length;i++){
			//alert(juqing[i].id.substring(0,6)+","+beginId);
			if(juqing[i].id.substring(0,8)!=beginId) break;
8
			if(juqing[i].bg!="notes"){
				var string1 = "<div class='block' style=background-image:url('../images/bg/" + juqing[i].bg + ".png');>";
				var string2 = "<div class='img1' style=background-image:url('../images/npc/" + juqing[i].npcL + "-1.png');>";	
				var string3 = "<div class='img1' style=background-image:url('../images/npc/" + juqing[i].npcR + "-2.png');>";	
				var string4 = "<div class='img1' style=background-image:url('../images/npc/" + juqing[i].npcName + "-000-" + juqing[i].LorR + ".png');>";
				var string5 = "<div class='img1' style=background-image:url('../images/bg/bg-" + juqing[i].LorR + ".png');>";			
				var string6 = "<div class='txt'><article class='txt' >" + juqing[i].text +"</article></div>";
				var string7 = "</div></div></div></div></div>";
				txt += string1 + string2 + string3 + string4 + string5 + string6 + string7 ;
			}
			else{
				var string1 = "<div class='block' >";	
				var string2 = "<div class='img1' >";	
				var string3 = "<div class='img1' >";	
				var string4 = "<div class='img1' >";	
				var string5 = "<div class='img1' >";	
			}
			
				
		}
		

		document.getElementById("text").innerHTML = txt;
		//alert(parseInt(beginId.substring(4,6)));
		if(parseInt(beginId.substring(6,8))==1){
			document.getElementById("lasttask").className="gray";
			document.getElementById("clicklastT").onclick= function(){""};
			document.getElementById("clicknextT").onclick= function(){initDialog(chapnum,tasknum+1,1);};
		}
		else if(task[chapnum+tasknum+1].id.substring(0,6)!=chapter[chapterNum].id){
			document.getElementById("nexttask").className="gray";
			document.getElementById("clicknextT").onclick= function(){""};
			document.getElementById("clicklastT").onclick= function(){initDialog(chapnum,tasknum-1,1);};
		}
		else{
			document.getElementById("lasttask").className="normal";
			document.getElementById("nexttask").className="normal";
			document.getElementById("clicknextT").onclick= function(){initDialog(chapnum,tasknum+1,1);};
			document.getElementById("clicklastT").onclick= function(){initDialog(chapnum,tasknum-1,1);};
		}
		document.body.scrollTop = document.documentElement.scrollTop = 0;
	
	
	}
	
	function toTaskNum(id){
		var taskStr=""
		if(id.substring(0,2)=="ZX"){
			taskStr = parseInt(id.substring(2,4)) +"-";

			if(id[4]=="9") taskStr += "支" + id[5];
			else if(id[4]=="8") taskStr += "番外" + id[5];
			else taskStr += parseInt(id.substring(4,6));
		}
		if(id.substring(0,3)=="ZMR"){
			taskStr = parseInt(id.substring(5,6)) +"-"+parseInt(id.substring(6,8));

		}
		return taskStr;
	}
		
	</script>	
		

	<script type='text/javascript' src='js/jquery-2.1.4.min.js'></script>
	<!-- Dropdown-Menu-JavaScript -->
			<script>
				$(document).ready(function(){
					$('.dropdown').hover(            
						function() {
							$('.dropdown-menu', this).stop( true, true ).slideDown('fast');
							$(this).toggleClass('open');        
						},
						function() {
							$('.dropdown-menu', this).stop( true, true ).slideUp('fast');
							$(this).toggleClass('open');       
						}
					);
				});
			</script>
		<!-- //Dropdown-Menu-JavaScript -->


<script type='text/javascript' src='../js/jquery.zoomslider.min.js'></script>
		<!-- search-jQuery -->
				<script src='../js/main.js'></script>
			<!-- pop-up-box -->  
		<script src='../js/jquery.magnific-popup.js' type='text/javascript'></script>
	<!--//pop-up-box -->


	<script>
		$(document).ready(function() {
		$('.w3_play_icon,.w3_play_icon1,.w3_play_icon2').magnificPopup({
			type: 'inline',
			fixedContentPos: false,
			fixed../images/bg/bgPos: true,
			overflowY: 'auto',
			closeBtnInside: true,
			preloader: false,
			midClick: true,
			removalDelay: 300,
			mainClass: 'my-mfp-zoom-in'
		});
																		
		});
	</script>

<!--/script-->
<script type='text/javascript' src='../js/move-top.js'></script>
<script type='text/javascript' src='../js/easing.js'></script>

<script type='text/javascript'>
			jQuery(document).ready(function($) {
				$('.scroll').click(function(event){		
					event.preventDefault();
					$('html,body').animate({scrollTop:$(this.hash).offset().top},900);
				});
			});
</script>
 <script type='text/javascript'>
						$(document).ready(function() {
							/*
							var defaults = {
					  			containerID: 'toTop', // fading element id
								containerHoverID: 'toTopHover', // fading element hover id
								scrollSpeed: 1200,
								easingType: 'linear' 
					 		};
							*/
							
							$().UItoTop({ easingType: 'easeOutQuart' });
							
						});
					</script>
<!--end-smooth-scrolling-->
<!--js for bootstrap working-->
	<script src='../js/bootstrap.js'></script>
<!-- //for bootstrap working -->


</body>
</html>